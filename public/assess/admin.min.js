window.addEventListener("load",function(){!function(){"use strict";var b={users:{current:{},pending:{},removed:{},absentPending:{}},table_Id:"",table_lookup:{},tableObj:{},sharedRubricsIndex:{},appEditRecords:{loadedRubric:[]},editorIsOpen:{rubric:!1},db:{rubrics:!1}};function p(e){"PERMISSION_DENIED"===e.code&&t()}function t(){firebase.auth().signOut()}function f(e){return document.getElementById(e)}function a(e){f(e).classList.contains("nodisplay")||(f(e).className+=" nodisplay")}function c(e){f(e).className=f(e).className.replace(/(?:^|\s)nodisplay(?!\S)/g,"")}function s(e){f(e).className=f(e).className.replace(/(?:^|\s)disabledbutton(?!\S)/g,"")}function d(e){for(;e.hasChildNodes();){for(;e.lastChild.hasChildNodes();)e.lastChild.removeChild(e.lastChild.lastChild);e.removeChild(e.lastChild)}}function r(e){return null===e||("object"!=typeof e||0===Object.keys(e).length)}function l(e,t){var n={c:""+t,d:"Rubric could not be created.\n"+t,e:"Rubric successfully saved!",f:"Please select an existing rubric to load.",g:"A section with that name already exists!"}[e]||"Error.";window.mscAlert({title:"",subtitle:n})}function n(){firebase.database().ref("spkTchrList").once("value").then(function(e){b.users.current=e.val()||{},firebase.database().ref("newUser/spk").once("value").then(function(e){b.users.pending=e.val()||{},v()})},function(e){p(e)})}function i(){var e,t,n,a,r,i,s,c,l,o=JSON.parse(JSON.stringify(b.users.pending)),d=f("manageOpts").querySelectorAll(".btn-default"),u=f("manageOpts").querySelectorAll(".btn-success");b.users.absentPending=(e=d,t=o,n=Object.keys(t),a={},r={},e.forEach(function(e){a[e.dataset.uid]=e.dataset.name}),n.forEach(function(e){a.hasOwnProperty(e)||(r[e]=t[e])}),r),b.users.removed={},b.users.current={},b.users.pending={},u.forEach(function(e){b.users.current[e.dataset.uid]=e.dataset.name}),d.forEach(function(e){b.users.pending[e.dataset.uid]=e.dataset.name}),i={},s=Object.keys(b.users.current),c=Object.keys(b.users.pending),l=Object.keys(b.users.absentPending),s.forEach(function(e){i["spkTchrList/"+e]=b.users.current[e]}),c.forEach(function(e){i["newUser/spk/"+e]=b.users.pending[e]}),l.forEach(function(e){i["newUser/spk/"+e]=null}),firebase.database().ref().update(i,function(e){e?(p(e),window.mscAlert({title:"",subtitle:"Data could not be updated.\n"+e})):(window.mscAlert({title:"",subtitle:"Changes saved!"}),b.users.absentPending={},v())})}function o(){var e=f("manageOpts").querySelectorAll(".btn-success"),t=Object.keys(b.users.current),n={};e.forEach(function(e){n[e.dataset.uid]=e.dataset.name}),t.forEach(function(e){n.hasOwnProperty(e)||(b.users.removed[e]=b.users.current[e])}),r(b.users.removed)?i():window.mscConfirm({title:"Warning",subtitle:"This action will remove access for some current users.\nTheir data will also be permanently deleted.\nAre you sure?",cancelText:"Exit",onOk:function(){var e,t;e=Object.keys(b.users.removed),t={},e.forEach(function(e){t["assessments/"+e]=null,t["spkTchrList/"+e]=null}),firebase.database().ref().update(t,function(e){e?(p(e),window.mscAlert({title:"",subtitle:"User data could not be removed.\n"+e})):i()})},onCancel:function(){}})}function u(){window.mscConfirm({title:"Warning",subtitle:"This action will delete all users awaiting access to the app. Proceed?",cancelText:"Exit",onOk:function(){var t;t={},Object.keys(b.users.pending).forEach(function(e){t["newUser/spk/"+e]=null}),firebase.database().ref().update(t,function(e){e?(p(e),window.mscAlert({title:"",subtitle:"Users pending access could not be cleared.\n"+e})):(window.mscAlert({title:"",subtitle:"Changes saved!"}),b.users.pending={},v())})},onCancel:function(){}})}function h(){n()}function m(e){var t;e.target!==e.currentTarget&&("DIV"===e.target.nodeName&&((t=e.target).classList.contains("btn-success")?(t.className=t.className.replace(/(?:^|\s)btn-success(?!\S)/g,""),t.className+=" btn-default"):(t.className=t.className.replace(/(?:^|\s)btn-default(?!\S)/g,""),t.className+=" btn-success")),e.stopPropagation())}function v(){var t,n,e=f("manageOpts"),a=document.createDocumentFragment(),r=Object.keys(b.users.current),i=Object.keys(b.users.pending);d(e),r.forEach(function(e){(t=document.createElement("div")).className="btn btn-sm btn-success btn-fixwidth",t.dataset.uid=e,t.dataset.name=b.users.current[e],t.textContent=b.users.current[e]+"\n"+e,a.appendChild(t)}),i.forEach(function(e){(n=document.createElement("div")).className="btn btn-sm btn-default btn-fixwidth",n.dataset.uid=e,n.dataset.name=b.users.pending[e],n.textContent=b.users.pending[e]+"\n"+e,a.appendChild(n)}),e.appendChild(a),c("manageOpts"),c("optActions")}function g(e,t){return Object.keys(e)[Object.values(e).indexOf(t)]}function k(e){var t;e.preventDefault(),t=(e.originalEvent||e).clipboardData.getData("text/plain").replace(/(<([^>]+)>)/gi,""),document.execCommand("insertText",!1,t)}function E(){!1===b.db.rubrics&&function(){firebase.auth().currentUser.uid;firebase.database().ref("sharedRubrics/rubricsIndex").once("value").then(function(e){b.sharedRubricsIndex=e.val()||{},r(b.sharedRubricsIndex)||(c("ruLoadSelected"),B()),f("newRubrikSectionBtn").addEventListener("click",M,{capture:!1,passive:!0}),f("editRubric").addEventListener("click",j,{capture:!1,passive:!0}),f("ac_ru_commit").addEventListener("click",W,{capture:!1,passive:!0}),f("ac_ru_dis").addEventListener("click",T,{capture:!1,passive:!0}),f("ruLoadSelected").addEventListener("click",F,{capture:!1,passive:!0}),f("ac_ru_del").addEventListener("click",z,{capture:!1,passive:!0}),f("rubrik").addEventListener("paste",k,!1),b.db.rubrics=!0},function(e){p(e)})}(),c("editRubric"),!0===b.editorIsOpen.rubric&&c("rubricActions")}function C(e){var t,n,a,r,i;if(e.target!==e.currentTarget)switch(e.target.className){case"criterias":"hr"===(i=e.target.id.split("-"))[0]&&"1"===i[1]&&"1"===i[2]&&(b.table_Id=""+i[3],function(e){f("ht"+e).value=b.table_lookup[e],f("ht"+e).setAttribute("data-oldval",b.table_lookup[e]),c("hn"+e)}(i[3]));break;case"dropbtn":r=e.target.id.split("-"),b.table_Id=""+r[3],f("hy-dropdown-"+r[2]+"-"+b.table_Id).classList.toggle("show");break;case"row-insert-top":a=e.target.parentNode.id.split("-"),b.table_Id=""+a[3],R(parseInt(a[2]),"top");break;case"row-insert-bottom":n=e.target.parentNode.id.split("-"),b.table_Id=""+n[3],R(parseInt(n[2]),"bottom");break;case"row-delete":t=e.target.parentNode.id.split("-"),b.table_Id=""+t[3],function(e){var t=I();if(t.length<=3)return;t.splice(e,1),O(t),Y(!1)}(parseInt(t[2]));break;default:return}}function N(e){var t,n,a,r;if(e.target!==e.currentTarget)switch(e.target.className){case"dropbtn":r=e.target.id.split("-"),b.table_Id=""+r[3],f("hx-dropdown-"+r[2]+"-"+b.table_Id).classList.toggle("show");break;case"col-insert-left":a=e.target.parentNode.id.split("-"),b.table_Id=""+a[3],y(parseInt(a[2]),"left");break;case"col-insert-right":n=e.target.parentNode.id.split("-"),b.table_Id=""+n[3],y(parseInt(n[2]),"right");break;case"col-delete":t=e.target.parentNode.id.split("-"),b.table_Id=""+t[3],function(e){var t,n=I(),a=n.length;if(n[0].length<=3)return;for(t=0;t<a;t++)n[t].splice(e,1);O(n),Y(!1)}(parseInt(t[2]));break;default:return}}function w(e){var o,t,n,a,r=e.target.id.split("-");switch(r[0]){case"hk":a=r,b.table_Id=""+a[1],function(e){var t="ht"+e,n=f(t).dataset.oldval,a=g(b.table_lookup,n),r=f(t).value;if(!0===function(e,t){var n=A(e);!0===n&&e===t&&(n=!1);return n}(r,n))return f(t).value="",l("g");b.table_lookup[a]=r,b.table_Id=""+r,f(t).dataset.oldval="",f("hr-1-1-"+a).textContent=r,D(e)}(a[1]);break;case"hz":n=r,b.table_Id=""+n[1],D(n[1]);break;case"hs":t=r,b.table_Id=""+t[1],window.mscConfirm({title:"",subtitle:"This will reset all data in this section! Are you sure?",cancelText:"Exit",onOk:function(){var e,t;e=b.table_Id,t=!1,b.tableObj[e]=_(),Y(t)},onCancel:function(){}});break;case"hd":o=r,b.table_Id=""+o[1],window.mscConfirm({title:"",subtitle:"This will delete all data in this section! Are you sure?",cancelText:"Exit",onOk:function(){var e,t,n,a,r,i,s,c,l;e=o[1],t=f("table-headers-"+e).parentNode,n=f("table-body-"+e),a=f("table-headers-"+e),r=f("hs-"+e),i=f("hd-"+e),s=f("hk-"+e),c=f("hz-"+e),l=f("hn"+e),b.table_Id="",n.removeEventListener("focusout",L),n.removeEventListener("click",C),a.removeEventListener("click",N),r.removeEventListener("click",w),i.removeEventListener("click",i),s.removeEventListener("click",s),c.removeEventListener("click",c),d(t),t.parentNode.removeChild(t),r.parentNode.removeChild(r),i.parentNode.removeChild(i),s.parentNode.removeChild(s),c.parentNode.removeChild(c),l.parentNode.removeChild(l),delete b.tableObj[e],delete b.table_lookup[e]},onCancel:function(){}});break;default:return}e.stopPropagation()}function _(){for(var e,t=[],n=0;n<=5;n++){e=[];for(var a=0;a<=6;a++)e.push("");t.push(e)}return t}function I(){var e=b.tableObj[b.table_Id];return null==e?_():e}function O(e){b.tableObj[b.table_Id]=e}function x(e,t,n){for(var a=1;a<=t;a++)e.appendChild(function(e,t){var n=document.createElement("tr");n.setAttribute("id","hr-"+e+"-"+b.table_Id);for(var a=0;a<=t;a++){var r,i,s,c,l,o,d,u=document.createElement("td");0===a?(u.contentEditable=!1,1<e&&(r=document.createElement("span"),i=document.createElement("div"),s=document.createElement("button"),c=document.createElement("div"),l=document.createElement("p"),o=document.createElement("p"),d=document.createElement("p"),i.setAttribute("class","dropdown"),s.id="hy-dropbtn-"+e+"-"+b.table_Id,s.className="dropbtn",c.id="hy-dropdown-"+e+"-"+b.table_Id,c.className="dropdown-content",l.className="row-insert-top",l.textContent="Insert row above",o.className="row-insert-bottom",o.textContent="Insert row below",d.className="row-delete",d.textContent="Delete row",c.appendChild(l),c.appendChild(o),c.appendChild(d),i.appendChild(s),i.appendChild(c),u.appendChild(r),u.appendChild(i)),u.setAttribute("class","row-header")):1===a&&1===e?(u.contentEditable=!1,u.setAttribute("class","criterias")):u.contentEditable=!0,u.setAttribute("id","hr-"+e+"-"+a+"-"+b.table_Id),n.appendChild(u)}return n}(a,n))}function R(e,t){var n=I(),a=n[0].length,r=new Array(a).fill("");"top"===t&&n.splice(e,0,r),"bottom"===t&&n.splice(e+1,0,r),O(n),Y(!1)}function y(e,t){for(var n=I(),a=n.length,r=0;r<a;r++)"left"===t&&n[r].splice(e,0,""),"right"===t&&n[r].splice(e+1,0,"");O(n),Y(!1)}function L(e){var t,n,a;e.target!==e.currentTarget&&(e.target&&"TD"===e.target.nodeName&&(n=(t=e.target.id).split("-"),b.table_Id=""+n[3],(a=I())[n[1]][n[2]]=f(t).textContent,O(a)),e.stopPropagation())}function D(e){a("hn"+e),f("ht"+e).value=""}function j(e){var t,n,a;if(!e.target.matches(".dropbtn"))for(t=document.getElementsByClassName("dropdown-content"),a=0;a<t.length;a++)(n=t[a]).classList.contains("show")&&n.classList.remove("show")}function A(e){var t,n=Object.keys(b.tableObj),a=!1;if(n.length)for(t=0;t<n.length;t++)if(b.table_lookup[n[t]]===e){a=!0;break}return a}function S(){var e,t,n,a,r,i="true",s=b.tableObj,c=Object.keys(s);if(""===f("ruNameNewtxt").value)return"Please give the rubric a name!";if(!c.length)return"Please add at least one section!";for(n=0;n<c.length;n++){if(""===c[n]){i="Please provide names for all sections!";break}if(s[e=c[n]].length<3){i="Please provide at least one criteria!";break}for(a=2;a<s[e].length;a++){if(s[c[n]][a].length<3){i="Please provide at least one score!";break}if(""===s[c[n]][a][1]){i="Please provide names for all criterias!";break}for(r=2;r<s[e][a].length;r++)if(""===s[e][1][r]||isNaN(s[e][1][r])){i="All scores are required and must be numerical!";break}if(t=function(e){for(var t=[],n=e.length,a=0;a<n;a++){for(var r=a+1;r<n;r++)e[a]===e[r]&&(r=++a);t.push(e[a])}return t}(s[e][1]),1!=s[e][1].length-t.length){i="Please ensure that the scores within each section are unique (no duplicate scores)!";break}}}return i}function P(){for(var e=Object.keys(b.tableObj),t=0;t<e.length;t++)J(e[t]);d(f("rubrik")),b.tableObj={},b.table_Id="",b.table_lookup={},b.editorIsOpen.rubric=!1,a("ruNameCurrent"),f("ruNameNewtxt").value="",a("sectionInputWrapper"),a("rubricActions"),f("ac_ru_del").style.display="none",b.sharedRubricsIndex.length&&c("ruLoadSelected"),c("ruLoadChkBoxes")}function T(){b.appEditRecords.loadedRubric.length&&c("ruLoadSelected"),P()}function U(){for(var e,t,n,a,r,i,s=b.appEditRecords.loadedRubric[0],c=[],l=0;l<s.rubricDef.length;l++)c.push(s.rubricDef[l].sectionName);for(c=function(e){var t,n,a,r=function(e){var t,n={};for(t=0;t<e.length;t++)n.hasOwnProperty(e[t])?n[e[t]].push(t):e.lastIndexOf(e[t])!==t&&(n[e[t]]=[t]);return n}(e),i=Object.keys(r);for(n=0;n<i.length;n++)for(t=r[i[n]],a=0;a<t.length;a++)0<a&&(e[t[a]]=e[t[a]]+"("+a+")");return e}(c),l=0;l<s.rubricDef.length;l++)s.rubricDef[l].sectionName=c[l];for(b.tableObj={},l=0;l<s.rubricDef.length;l++)for(t=s.rubricDef[l].sectionDef.length+2,n=s.rubricDef[l].sectionDef[0].criteriaDef.length+2,a="table"+l,b.tableObj[a]=[],b.table_lookup[a]=s.rubricDef[l].sectionName,r=0;r<t;r++)e=new Array(n).fill(""),b.tableObj[a].push(e);for(l=0;l<s.rubricDef.length;l++)for(a=g(b.table_lookup,s.rubricDef[l].sectionName),t=s.rubricDef[l].sectionDef.length+2,n=s.rubricDef[l].sectionDef[0].criteriaDef.length+2,r=2;r<t;r++)for(b.tableObj[a][r][1]=s.rubricDef[l].sectionDef[r-2].criteriaName,i=2;i<n;i++)b.tableObj[a][1][i]=s.rubricDef[l].sectionDef[r-2].criteriaDef[i-2].score,b.tableObj[a][r][i]=s.rubricDef[l].sectionDef[r-2].criteriaDef[i-2].descriptor;return c}function e(e){var t,n,a,r,i,s;if(d(f("ruLoadChkBoxes")),e.length)for(t=0;t<e.length;t++)n=e[t],s=i=r=a=void 0,a=f("ruLoadChkBoxes"),r=document.createDocumentFragment(),i=document.createElement("input"),s=document.createElement("label"),i.id="ruSelect_"+n,i.value=n,i.name="scalor",i.type="radio",s.htmlFor="ruSelect_"+n,i.dataset.share=!0,s.className="shared",s.textContent=b.sharedRubricsIndex[n].rubricName,s.style.color="#337ab7",r.appendChild(i),r.appendChild(s),a.appendChild(r);c("ruLoadSelected")}function B(){e(Object.keys(b.sharedRubricsIndex))}function q(t){firebase.auth().currentUser.uid;var n,e="sharedRubrics/rubrics/"+t;""!==t&&null!=t?firebase.database().ref(e).once("value").then(function(e){null!==(n=e.val())&&(b.appEditRecords.loadedRubric=[],b.appEditRecords.loadedRubric.push(n),b.appEditRecords.loadedRubric[0].rubricKey=t,b.appEditRecords.loadedRubric[0].isFromShared=!0,function(){var e,t=[];for(c("ruNameCurrent"),f("ruNameNewtxt").value=b.appEditRecords.loadedRubric[0].rubricName,t=U(),e=0;e<t.length;e++)b.table_Id=""+t[e],function(e){K(e,!1)}(t[e]);b.editorIsOpen.rubric=!0,a("ruLoadChkBoxes"),a("ruLoadSelected"),c("sectionInputWrapper"),c("rubricActions"),f("ac_ru_del").style.display="block"}())},function(e){p(e)}):l("f")}function F(){for(var e,t=document.getElementsByName("scalor"),n=0;n<t.length;n++)if(t[n].checked){e=t[n].value;break}q(e)}function W(){var n,e=S(),i=f("ruNameNewtxt").value;"true"===e?(f("editRubric").className+=" disabledbutton",window.scrollTo(0,0),null!=b.appEditRecords.loadedRubric[0]&&(n=b.appEditRecords.loadedRubric[0].rubricKey,window.mscConfirm({title:"",subtitle:"Please confirm to update this shared rubric.",okText:"Update",cancelText:"Cancel",onOk:function(){var a,e,r,t;a=n,e=function(e){var t,n,a,r,i,s,c=Object.keys(b.tableObj),l={};for(l.rubricName=e,l.rubricDef=[],r=b.appEditRecords.loadedRubric.length-1;0<=r;r--)b.appEditRecords.loadedRubric[r].rubricName===e&&b.appEditRecords.loadedRubric.splice(r,1);for(r=0;r<c.length;r++){for((t={}).sectionName=b.table_lookup[c[r]],t.sectionDef=[],i=2;i<b.tableObj[c[r]].length;i++){for((n={}).criteriaName=b.tableObj[c[r]][i][1],n.criteriaDef=[],s=2;s<b.tableObj[c[r]][i].length;s++)(a={}).score=b.tableObj[c[r]][1][s],a.descriptor=b.tableObj[c[r]][i][s],n.criteriaDef.push(a);t.sectionDef.push(n)}l.rubricDef.push(t)}return l}(i),r=function(e){var t={rubricName:e.rubricName,sectionNames:[]};return t.sectionNames=e.rubricDef.map(function(e){return e.sectionName}),t}(e),(t={})["sharedRubrics/rubricsIndex/"+a]=r,t["sharedRubrics/rubrics/"+a]=e,firebase.database().ref().update(t,function(e){var t,n;e?(p(e),l("d",e),s("editRubric")):(t=a,n=r,b.sharedRubricsIndex[t]=n,b.appEditRecords.loadedRubric=[],B(),P(),s("editRubric"),l("e"))})},onCancel:function(){}}))):l("c",e)}function z(){window.mscConfirm({title:"Warning!",subtitle:"You are about to delete rubric: "+b.appEditRecords.loadedRubric[0].rubricName+"\nAre you sure?",cancelText:"Exit",onOk:function(){!function(e){firebase.auth().currentUser.uid;var t={};t["sharedRubrics/rubricsIndex/"+e]=null,t["sharedRubrics/rubrics/"+e]=null,firebase.database().ref().update(t,function(e){e?p(e):(b.appEditRecords.loadedRubric=[],a("ruLoadSelected"),P(),B())})}(b.appEditRecords.loadedRubric[0].rubricKey)},onCancel:function(){}})}function K(e,t){var n;!0!==t?(""!==e&&!1===t&&(function(e){b.tableObj.hasOwnProperty(e)||(b.tableObj[e]=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]),b.table_Id=""+e;var t=f("rubrik"),n=document.createDocumentFragment(),a=document.createElement("table"),r=document.createElement("thead"),i=document.createElement("tbody"),s=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),o=document.createElement("input"),d=document.createElement("button"),u=document.createElement("button");l.id="hn"+e,l.className="sectionNameEdit nodisplay",o.id="ht"+e,o.dataset.oldval="",d.id="hk-"+e,d.className="btn btn-sm btn-whiteBlue",d.textContent="Rename section",u.id="hz-"+e,u.className="btn btn-sm btn-default",u.textContent="Cancel",a.className="spreadsheet__table",r.id="table-headers-"+e,r.className="spreadsheet__table--headers",i.className="spreadsheet__table--body",i.id="table-body-"+e,s.id="hs-"+e,s.className="btn btn-xs btn-blueYellow pull-right spreadSheetBtn",s.textContent="Reset section",c.id="hd-"+e,c.className="btn btn-xs btn-dangerous pull-right spreadSheetBtn",c.textContent="Delete section",l.appendChild(o),l.appendChild(d),l.appendChild(u),a.appendChild(r),a.appendChild(i),n.appendChild(l),n.appendChild(a),n.appendChild(c),n.appendChild(s),t.appendChild(n)}(n=g(b.table_lookup,e)),Y(!0),f("hs-"+n).addEventListener("click",w),f("hd-"+n).addEventListener("click",w),f("hk-"+n).addEventListener("click",w),f("hz-"+n).addEventListener("click",w)),f("newRubrikSection").value=""):l("g")}function J(e){var t=f("table-headers-"+e),n=f("table-body-"+e);null!==n&&(n.removeEventListener("focusout",L),n.removeEventListener("click",C)),null!==t&&t.removeEventListener("click",N)}function Y(e){var t,n,a,r,i,s,c,l=""+b.table_Id;!1===e&&J(l),n=(t=I()).length-1,a=t[0].length-1,r=f("table-headers-"+l),s=(i=f("table-body-"+l)).cloneNode(!0),i.parentNode.replaceChild(s,i),c=r.cloneNode(!0),r.parentNode.replaceChild(c,r),d(c),d(s),c.appendChild(function(e){var t,n=document.createElement("tr");for(n.setAttribute("id","hh-0-"+b.table_Id),t=0;t<=e;t++){var a,r,i,s,c,l,o,d=document.createElement("th");d.setAttribute("id","hb-0-"+t+"-"+b.table_Id),d.setAttribute("class",0===t?"":"column-header"),0!==t&&(a=document.createElement("span"),1<t&&(a.setAttribute("class","column-header-span"),r=document.createElement("div"),i=document.createElement("button"),s=document.createElement("div"),c=document.createElement("p"),l=document.createElement("p"),o=document.createElement("p"),r.setAttribute("class","dropdown"),i.id="hx-dropbtn-"+t+"-"+b.table_Id,i.className="dropbtn",s.id="hx-dropdown-"+t+"-"+b.table_Id,s.className="dropdown-content",c.className="col-insert-left",c.textContent="Insert column left",l.className="col-insert-right",l.textContent="Insert column right",o.className="col-delete",o.textContent="Delete column",s.appendChild(c),s.appendChild(l),s.appendChild(o),r.appendChild(i),r.appendChild(s),d.appendChild(a),d.appendChild(r))),n.appendChild(d)}return n}(a)),x(s,n,a),function(){var e,t,n=I();if(null!=n)for(e=1;e<n.length;e++)for(t=1;t<n[e].length;t++)f("hr-"+e+"-"+t+"-"+b.table_Id).textContent=n[e][t]}(),s.addEventListener("focusout",L),s.addEventListener("click",C),c.addEventListener("click",N),f("hr-1-1-"+b.table_Id).textContent=b.table_lookup[l]}function M(){var e,t=f("newRubrikSection").value,n=A(t),a=Object.keys(b.table_lookup),r=0<a.length?(e=a.length-1,a=a.sort(),"table"+(Number(a[e].substring(5))+1)):"table0";K(b.table_lookup[r]=t,n)}function V(){window.location="index.html"}firebase.auth().onAuthStateChanged(function(e){e?(f("usrPhoto").src=e.photoURL,f("manageOpts").addEventListener("click",m,{capture:!1,passive:!0}),f("updateUsers").addEventListener("click",o,{capture:!1,passive:!0}),f("deleteUsers").addEventListener("click",u,{capture:!1,passive:!0}),f("revertUsers").addEventListener("click",h,{capture:!1,passive:!0}),f("leEDITOR").addEventListener("click",V,{capture:!1,passive:!0}),f("leSignout").addEventListener("click",t,{capture:!1,passive:!0}),n(),E()):window.location="../index.html"})}()});